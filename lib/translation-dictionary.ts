// Translation dictionary for problem categories
// Prioritizes English as the primary language

export interface ProblemTranslation {
  english: string;
  hindi: string;
  marathi: string;
  category: string;
}

export const PROBLEM_TRANSLATIONS: ProblemTranslation[] = [
  {
    english: "Water Supply",
    hindi: "जल आपूर्ति",
    marathi: "जल आपूर्ति",
    category: "water",
  },
  {
    english: "Garbage and Cleanliness",
    hindi: "कचरा व स्वच्छता",
    marathi: "घनकचरा व स्वच्छता",
    category: "waste",
  },
  {
    english: "Land Encroachment",
    hindi: "भूमि अतिक्रमण",
    marathi: "भूमी अतिक्रमण",
    category: "land",
  },
  {
    english: "Property Tax",
    hindi: "मालमत्ता कर",
    marathi: "मालमत्ता कर",
    category: "tax",
  },
  {
    english: "Law and Order",
    hindi: "कानून व व्यवस्था",
    marathi: "कायदा व सुव्यवस्था",
    category: "law",
  },
  {
    english: "Roads and Traffic",
    hindi: "सड़क व ट्रैफिक",
    marathi: "रस्ते व वाहतूक",
    category: "transport",
  },
  {
    english: "City Survey and DPR",
    hindi: "शहर सर्वेक्षण व DPR",
    marathi: "शहर सर्वेक्षण व DPR",
    category: "survey",
  },
  {
    english: "Stamp and Registration",
    hindi: "मुहर व नोंदणी",
    marathi: "नोंदणी व मुद्रांक",
    category: "registration",
  },
  {
    english: "Slum Rehabilitation",
    hindi: "झोपड़पट्टी पुनर्वसन",
    marathi: "झोपडपट्टी पुनर्वसन",
    category: "rehabilitation",
  },
  {
    english: "Electricity Supply",
    hindi: "बिजली आपूर्ति",
    marathi: "वीज वितरण व पुरवठा",
    category: "electricity",
  },
  {
    english: "Health Facilities",
    hindi: "स्वास्थ्य सुविधा",
    marathi: "आरोग्य सुविधा",
    category: "health",
  },
  {
    english: "PMRDA",
    hindi: "पीएमआरडीए",
    marathi: "पीएमआरडीए",
    category: "pmrda",
  },
  {
    english: "PMPL",
    hindi: "पीएमपीएल",
    marathi: "पीएमपीएमएल",
    category: "pmpl",
  },
  {
    english: "Social Welfare",
    hindi: "सामाजिक कल्याण",
    marathi: "सामाजिक न्याय विभाग",
    category: "welfare",
  },
  {
    english: "MHADA",
    hindi: "म्हाडा",
    marathi: "म्हाडा",
    category: "mhada",
  },
  // Additional Hindi terms found in your dashboard
  {
    english: "Building Permission",
    hindi: "बांधकाम परवानगी",
    marathi: "बांधकाम परवानगी",
    category: "building",
  },
  {
    english: "Police Department",
    hindi: "पुलिस विभाग",
    marathi: "पोलीस विभाग",
    category: "police",
  },
  {
    english: "Property Tax Department",
    hindi: "संपत्ति कर विभाग",
    marathi: "मालमत्ता कर विभाग",
    category: "tax",
  },
  {
    english: "Cooperative Society Department",
    hindi: "सहकारी समिति विभाग",
    marathi: "सहकारी समिती विभाग",
    category: "cooperative",
  },
  {
    english: "Street Light Department",
    hindi: "मार्ग प्रकाश विभाग",
    marathi: "रस्ता प्रकाश विभाग",
    category: "streetlight",
  },
  {
    english: "Building Permission Department",
    hindi: "भवन अनुमति विभाग",
    marathi: "भवन परवानगी विभाग",
    category: "building",
  },
  // Additional common variations
  {
    english: "Water Supply Department",
    hindi: "जल आपूर्ति विभाग",
    marathi: "जल आपूर्ति विभाग",
    category: "water",
  },
  {
    english: "Solid Waste Management",
    hindi: "ठोस अपशिष्ट प्रबंधन",
    marathi: "घनकचरा व्यवस्थापन",
    category: "waste",
  },
  {
    english: "Building Permission",
    hindi: "भवन परवानगी",
    marathi: "भवन परवानगी",
    category: "building",
  },
  {
    english: "Street Light",
    hindi: "स्ट्रीट लाइट",
    marathi: "रस्ता प्रकाश",
    category: "streetlight",
  },
  {
    english: "Revenue Department",
    hindi: "राजस्व विभाग",
    marathi: "राजस्व विभाग",
    category: "revenue",
  },
  {
    english: "City Survey Officer",
    hindi: "शहर सर्वेक्षण अधिकारी",
    marathi: "शहर सर्वेक्षण अधिकारी",
    category: "survey",
  },
  {
    english: "Stamp and Registration Department",
    hindi: "मुहर व नोंदणी विभाग",
    marathi: "नोंदणी व मुद्रांक विभाग",
    category: "registration",
  },
  {
    english: "Electricity Department",
    hindi: "बिजली विभाग",
    marathi: "वीज विभाग",
    category: "electricity",
  },
  {
    english: "Health Department",
    hindi: "स्वास्थ्य विभाग",
    marathi: "आरोग्य विभाग",
    category: "health",
  },
  {
    english: "Deputy Charity Commissioner",
    hindi: "उप चैरिटी आयुक्त",
    marathi: "उप चैरिटी आयुक्त",
    category: "charity",
  },
  {
    english: "RTO Transport Department",
    hindi: "आरटीओ परिवहन विभाग",
    marathi: "आरटीओ परिवहन विभाग",
    category: "transport",
  },
  {
    english: "MSEDCL Mahavitran",
    hindi: "एमएसईडीसीएल महावितरण",
    marathi: "एमएसईडीसीएल महावितरण",
    category: "electricity",
  },
  // Additional English terms that might appear in dashboard
  {
    english: "Co-op Society Dept.",
    hindi: "सहकारी समिति विभाग",
    marathi: "सहकारी समिती विभाग",
    category: "cooperative",
  },
  {
    english: "Cooperative Society Department",
    hindi: "सहकारी समिति विभाग",
    marathi: "सहकारी समिती विभाग",
    category: "cooperative",
  },
  {
    english: "Building Permission Dept.",
    hindi: "भवन परवानगी विभाग",
    marathi: "भवन परवानगी विभाग",
    category: "building",
  },
  {
    english: "Street Light Dept.",
    hindi: "मार्ग प्रकाश विभाग",
    marathi: "रस्ता प्रकाश विभाग",
    category: "streetlight",
  },
  {
    english: "Police Dept.",
    hindi: "पुलिस विभाग",
    marathi: "पोलीस विभाग",
    category: "police",
  },
  {
    english: "Property Tax Dept.",
    hindi: "संपत्ति कर विभाग",
    marathi: "मालमत्ता कर विभाग",
    category: "tax",
  },
  {
    english: "Revenue Dept.",
    hindi: "राजस्व विभाग",
    marathi: "राजस्व विभाग",
    category: "revenue",
  },
  {
    english: "City Survey Officer",
    hindi: "शहर सर्वेक्षण अधिकारी",
    marathi: "शहर सर्वेक्षण अधिकारी",
    category: "survey",
  },
  {
    english: "Stamp & Reg. Dept.",
    hindi: "मुहर व नोंदणी विभाग",
    marathi: "नोंदणी व मुद्रांक विभाग",
    category: "registration",
  },
  {
    english: "Electricity Dept.",
    hindi: "बिजली विभाग",
    marathi: "वीज विभाग",
    category: "electricity",
  },
  {
    english: "Health Dept.",
    hindi: "स्वास्थ्य विभाग",
    marathi: "आरोग्य विभाग",
    category: "health",
  },
  {
    english: "Dy. Charity Comm.",
    hindi: "उप चैरिटी आयुक्त",
    marathi: "उप चैरिटी आयुक्त",
    category: "charity",
  },
  {
    english: "RTO/Transport Dept.",
    hindi: "आरटीओ परिवहन विभाग",
    marathi: "आरटीओ परिवहन विभाग",
    category: "transport",
  },
  {
    english: "PMPL",
    hindi: "पीएमपीएल",
    marathi: "पीएमपीएमएल",
    category: "pmpl",
  },
  {
    english: "Social Welfare",
    hindi: "सामाजिक कल्याण",
    marathi: "सामाजिक न्याय विभाग",
    category: "welfare",
  },
  {
    english: "MHADA",
    hindi: "म्हाडा",
    marathi: "म्हाडा",
    category: "mhada",
  },
];

// Function to get English version of a problem from any language
export function getEnglishProblem(problemText: string): string {
  if (!problemText) return problemText;

  const cleanText = problemText.trim();

  // First, try to find exact match
  const exactMatch = PROBLEM_TRANSLATIONS.find(
    (translation) =>
      translation.english.toLowerCase() === cleanText.toLowerCase() ||
      translation.hindi === cleanText ||
      translation.marathi === cleanText
  );

  if (exactMatch) {
    return exactMatch.english;
  }

  // Try case-insensitive exact match
  const caseInsensitiveMatch = PROBLEM_TRANSLATIONS.find(
    (translation) =>
      translation.english.toLowerCase() === cleanText.toLowerCase() ||
      translation.hindi.toLowerCase() === cleanText.toLowerCase() ||
      translation.marathi.toLowerCase() === cleanText.toLowerCase()
  );

  if (caseInsensitiveMatch) {
    return caseInsensitiveMatch.english;
  }

  // Try partial matching (text contains translation)
  const partialMatch = PROBLEM_TRANSLATIONS.find(
    (translation) =>
      cleanText.toLowerCase().includes(translation.english.toLowerCase()) ||
      translation.hindi.toLowerCase().includes(cleanText.toLowerCase()) ||
      translation.marathi.toLowerCase().includes(cleanText.toLowerCase()) ||
      cleanText.toLowerCase().includes(translation.hindi.toLowerCase()) ||
      cleanText.toLowerCase().includes(translation.marathi.toLowerCase())
  );

  if (partialMatch) {
    return partialMatch.english;
  }

  // Try reverse partial matching (translation contains text)
  const reversePartialMatch = PROBLEM_TRANSLATIONS.find(
    (translation) =>
      translation.english.toLowerCase().includes(cleanText.toLowerCase()) ||
      translation.hindi.toLowerCase().includes(cleanText.toLowerCase()) ||
      translation.marathi.toLowerCase().includes(cleanText.toLowerCase())
  );

  if (reversePartialMatch) {
    return reversePartialMatch.english;
  }

  // Try word-by-word matching for Hindi/Marathi text
  if (/[\u0900-\u097F]/.test(cleanText)) {
    const words = cleanText.split(/\s+/);
    for (const word of words) {
      const wordMatch = PROBLEM_TRANSLATIONS.find(
        (translation) =>
          translation.hindi.includes(word) ||
          translation.marathi.includes(word) ||
          word.includes(translation.hindi) ||
          word.includes(translation.marathi)
      );
      if (wordMatch) {
        return wordMatch.english;
      }
    }
  }

  // If no match found, return original text
  return problemText;
}

// Function to get all English problems for dropdown/selection
export function getEnglishProblems(): string[] {
  return PROBLEM_TRANSLATIONS.map((translation) => translation.english);
}

// Function to get problem by category
export function getProblemByCategory(
  category: string
): ProblemTranslation | undefined {
  return PROBLEM_TRANSLATIONS.find(
    (translation) => translation.category === category
  );
}

// Function to get all categories
export function getAllCategories(): string[] {
  return PROBLEM_TRANSLATIONS.map((translation) => translation.category);
}

// Function to normalize problem text for database storage
export function normalizeProblemForStorage(problemText: string): string {
  return getEnglishProblem(problemText);
}

// Function to get translation for display (if needed)
export function getProblemTranslation(
  englishProblem: string,
  language: "english" | "hindi" | "marathi"
): string {
  const translation = PROBLEM_TRANSLATIONS.find(
    (t) => t.english === englishProblem
  );
  if (!translation) return englishProblem;

  switch (language) {
    case "hindi":
      return translation.hindi;
    case "marathi":
      return translation.marathi;
    default:
      return translation.english;
  }
}
